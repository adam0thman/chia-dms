<div id="row">
  <h4 class="text-success"><a class="text-muted" href="main.html">Dashboard</a> <i
      class="fas fa-chevron-right text-secondary"></i> <i class="fas fa-shopping-cart"></i> Pembelian Stok 
      <a href="#" class="text-muted float-right" id="btn-cart"><i class="fas fa-shopping-cart"></i></a>
    </h4>
</div>

<br />
<br />

<p class="lead"">Untuk mula menambah stok anda, pilih produk yang anda kehendaki, pilih kuantiti  dan ketik butang "
  Masukkan Ke Dalam Bakul".</p> <hr class="mb-4">

  <div class="row">
    <!-- ############ 
            MINYAK
         ############ -->
    <div class="col-sm-4">
      <div class="card">
        <img class="card-img-top" src="img/minyak.jpeg" alt="Minyak Morhabshi" height="320px">
        <div class="card-body">
          <h5 class="card-title">Minyak Morhabshi</h5>
          <p class="card-text">Pilih jenis kapasiti dan tetapkan bilangan karton yang diperlukan.</p>
          <form class="">
            <div class="row">
              <div class="col-sm-12">
                <div class="form-group mb-2">
                  <label for="variant-minyak" class="sr-only">Kapasiti Minyak (ml)</label>
                  <select id="variant-minyak" class="form-control">
                    <option value="120">120ml (6 botol per karton)</option>
                    <option value="60">60ml (6 botol per karton)</option>
                    <option value="40">40ml (6 botol per karton)</option>
                    <option value="15">15ml (6 botol per karton)</option>
                  </select>
                </div>
              </div>
            </div>
          </form>
          <form class="">
            <div class="row">
              <div class="col-sm-8">
                <div class="form-group mb-2">
                  <label for="quantity-minyak" class="sr-only">Kuantiti Minyak (Karton)</label>
                  <input type="text" class="form-control" id="quantity-minyak" value="1 karton minyak" readonly>
                  <input type="hidden" class="form-control" id="quantity-minyak-actual" value="1" readonly>
                </div>
              </div>
              <div class="col-sm-2">
                <div class="form-group mb-2">
                  <button class="btn btn-outline-dark" onClick="event.preventDefault(); quantityDecrease('minyak');"><i
                      class="fas fa-minus"></i></button>
                </div>
              </div>
              <div class="col-sm-2">
                <div class="form-group mb-2">
                  <button class="btn btn-outline-dark" onClick="event.preventDefault(); quantityIncrease('minyak');"><i
                      class="fas fa-plus"></i></button>
                </div>
              </div>
            </div>
          </form>
          <button href="#" class="btn btn-outline-primary" onClick="addToCart('minyak')">Pesan Minyak Morhabshi</button>
        </div>
      </div> <!-- ./card -->
    </div> <!-- ./col-sm-4 -->
    <!-- ############ 
            STEVIA
         ############ -->
    <div class="col-sm-4">
      <div class="card">
        <img class="card-img-top" src="img/stevia.jpeg" alt="Minyak Morhabshi" height="320px">
        <div class="card-body">
          <h5 class="card-title">Premium Stevia Morhabshi</h5>
          <p class="card-text">Pilih jenis kapasiti dan tetapkan bilangan karton yang diperlukan.</p>
          <form class="">
            <div class="row">
              <div class="col-sm-12">
                <div class="form-group mb-2">
                  <label for="variant-stevia" class="sr-only">Kapasiti Stevia (ml)</label>
                  <select id="variant-stevia" class="form-control">
                    <option value="120">120ml (6 botol per karton)</option>
                    <option value="60">60ml (6 botol per karton)</option>
                  </select>
                </div>
              </div>
            </div>
          </form>
          <form class="">
            <div class="row">
              <div class="col-sm-8">
                <div class="form-group mb-2">
                  <label for="quantity-stevia" class="sr-only">Kuantiti Stevia (Karton)</label>
                  <input type="text" class="form-control" id="quantity-stevia" value="1 karton Stevia" readonly>
                  <input type="hidden" class="form-control" id="quantity-stevia-actual" value="1" readonly>
                </div>
              </div>
              <div class="col-sm-2">
                <div class="form-group mb-2">
                  <button class="btn btn-outline-dark" onClick="event.preventDefault(); quantityDecrease('stevia');"><i
                      class="fas fa-minus"></i></button>
                </div>
              </div>
              <div class="col-sm-2">
                <div class="form-group mb-2">
                  <button class="btn btn-outline-dark" onClick="event.preventDefault(); quantityIncrease('stevia');"><i
                      class="fas fa-plus"></i></button>
                </div>
              </div>
            </div>
          </form>
          <button href="#" class="btn btn-outline-primary" onClick="addToCart('stevia')">Order Stevia</button>
        </div>
      </div> <!-- ./card -->
    </div> <!-- ./col-sm-4 -->
  </div>

  <script>
    console.log("Hello from " + window.location.pathname + window.location.search);

    firebase.auth().onAuthStateChanged(function (user) {
      if (user) {
        //ok
      } else {
        console.log("User NOT signed in.");
      }
    });

    function quantityIncrease(product) {
      let curVal = $('#quantity-' + product + '-actual').val();
      let newVal = parseInt(curVal) + 1;
      if (curVal > 0 && curVal < 20) {
        $('#quantity-' + product + '-actual').val(newVal);
        $('#quantity-' + product).val(newVal + ' karton ' + product);
      }
    }

    function quantityDecrease(product) {
      let curVal = $('#quantity-' + product + '-actual').val();
      let newVal = parseInt(curVal) - 1;
      if (curVal > 1) {
        $('#quantity-' + product + '-actual').val(newVal);
        $('#quantity-' + product).val(newVal + ' karton ' + product);
      }
    }

    function addToCart(product) {
      let quantity = $('#quantity-' + product + '-actual').val();
      let variant = $('#variant-' + product).val();
      $('#btn-cart').html('<i class="fas fa-cart-plus text-success" data-tooltip="tooltip" data-placement="bottom" title="Pamerkan bakul pembelian anda."></i>')

      $(function () {
        $('[data-tooltip="tooltip"]').tooltip()
      })

      $('.fa-cart-plus').tooltip('show')

      setTimeout(function(){ 
        $('.fa-cart-plus').tooltip('hide');
      }, 3000);
      
    }

  </script>