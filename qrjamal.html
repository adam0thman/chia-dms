<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <title>i.M.Here | Blockchain Attendance System</title>

    <!-- Bootstrap core CSS -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="./css/signin.css" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <script src="./js/qrcode.js"></script>
  </head>
  <body class="text-center">

    <div class="container">
        <h5 id="theTitle"></h5>
        <br />
        <h5 id="theActual"></h5>
        <br />
        <h5 id="theUTF8"></h5>
        <br />
        <center>
          <div id="qrcode"></div>
        </center>
    </div>
      

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js" integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o" crossorigin="anonymous"></script>
    <!-- Firebase Initi
    ================================================== -->
    <script src="https://www.gstatic.com/firebasejs/5.9.0/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.9.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.9.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.9.0/firebase-auth.js"></script>
    <script src="./js/firebase-init.js"></script>
    <script type="text/javascript">
      
      const monthNames = ["January", "February", "March", "April", "May", "June","July", "August", "September", "October", "November", "December"];
      var today = new Date();
      var date = today.getDate()+'-'+(today.getMonth()+1)+'-'+today.getFullYear();
      console.log("date is: "+date);
      var time = today.getHours() + ":" + today.getMinutes() + ":" + today.getSeconds();
      var dateTime = date+' '+time;

      function getParameterByName(name) {
          if (name !== "" && name !== null && name != undefined) {
              name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
              var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                  results = regex.exec(location.search);
              return results === null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
          } else {
              var arr = location.href.split("/");
              return arr[arr.length - 1];
          }
      }
      function encode_utf8(s) {
        return unescape(encodeURIComponent(s));
        //return encodeURIComponent(s);
      }

      function decode_utf8(s) {
        return decodeURIComponent(escape(s));
      }

      const dummyData = 'sessions/UMC/2019-3/N1MgRYTYXuGC6wTUkhSS|abcdef123456';
      const dummyData64 = 'c2Vzc2lvbnMvVU1DLzIwMTktMy9OMU1nUllUWVh1R0M2d1RVa2hTU3xhYmNkZWYxMjM0NTYK';
      generateQR(dummyData64);
      $('#theTitle').text(dummyData64);
      $('#theActual').text(dummyData);
      $('#theUTF8').text('In UTF8: '+encode_utf8('/'));
      
      

      function generateQR(input) {
        var qrcode = new QRCode(document.getElementById("qrcode"), {
          text: input,
          width: 528,
          height: 528,
          colorDark : "#000000",
          colorLight : "#ffffff",
          correctLevel : QRCode.CorrectLevel.H
        });
      }
    </script>
  </body>
